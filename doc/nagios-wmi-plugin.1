.\"                                      Hey, EMACS: -*- nroff -*-
.\" First parameter, NAME, should be all caps
.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
.\" other parameters are allowed: see man(7), man(1)
.TH NAGIOS-WMI-PLUGIN 1 "Jul 26, 2009"
.\" Please adjust this date whenever revising the manpage.
.\"
.\" Some roff macros, for reference:
.\" .nh        disable hyphenation
.\" .hy        enable hyphenation
.\" .ad l      left justify
.\" .ad b      justify to both left and right margins
.\" .nf        disable filling
.\" .fi        enable filling
.\" .br        insert line break
.\" .sp <n>    insert n+1 empty lines
.\" for manpage-specific macros, see man(7)
.SH NAME
nagios-wmi-plugin \- Verify a Windows' machine system health via WMI 
.SH SYNOPSIS
.B wmi\-nagios\-plugin
[\fI-t/--target-host host\fR] [\fI-d/--domain domain\fR] [\fI-u/--user user\fR] [\fI-p/--password password\fR]
[\fI--timeout socket_time_out\fR] [\fI--cpu\fR] [\fI--cpu-warning warning_treshold\fR] [\fI--cpu-critical critical_treshold\fR]
[\fI--mem\fR] [\fI--mem-warning warning_treshold\fR] [\fI--mem-critical critical_treshold\fR]
[\fI--disk\fR] [\fI--disk-warning warning_treshold\fR] [\fI--disk-critical critical_treshold\fR]
[\fI-n/--number number_of_measures\fR] [\fI--delay measure_delay\fR] [\fI--services\fR]
[\fI-x/--exclude service1;service2;..\fR] [\fI-h/--help\fR] [\fI-v/--verbose\fR] [\fI-V/--version\fR] [\fIsettings_file.conf\fR]
.PP
.B nagios\-wmi\-plugin
.PP
.SH DESCRIPTION
This plugin monitors the basic OS health of a Windows machine. It uses the Windows Management Interface (WMI) and can
check CPU load, free RAM, free space on hard drives and that all services set to automatic are running.
All options can be defined in a configuration file to be passed as an argument. All the options set in this
conf file can be overridden via parameters on the command line. The tipical usage via Nagios will be with all options
defined in the configuration file and the ip address defined via command line.
.PP
.\" TeX users may be more comfortable with the \fB<whatever>\fP and
.\" \fI<whatever>\fP escape sequences to invode bold face and italics, 
.\" respectively.
.SH OPTIONS
A summary of options is included below.
.TP
.B \-t/\-\-target\-host host
Target host to be monitored
.TP
.B \-d/\-\-domain domain
Domain of the user that will run the WMI queries on the remote machine
.TP
.B \-u/\-\-user user
Logon name of the use that will run the WMI queries on the remote machine
.TP
.B \-p/\-\-password password
Password for the WMI user
.TP
.B \-\-timeout socket_timeout
Sets the socket timeout. The default is 5000ms
.TP
.B \-\-cpu
Monitors CPU
.TP
.B \-\-cpu-warning
What percentage of CPU load is to be considered as warning. Default is 85%.
.TP
.B \-\-cpu-critical
What percentage of CPU load is to be considered as critical. Default is 95%.
.TP
.B \-\-mem
Monitors free RAM
.TP
.B \-\-mem-warning
What percentage of occupied RAM is to be considered as warning. Default is 85%.
.TP
.B \-\-mem-critical
What percentage of occupied RAM is to be considered as critical. Default is 95%.
.TP
.B \-\-disk
Monitors all fixed hard drives for free space
.TP
.B \-\-disk-warning
What percentage of occupied hard drive is to be considered as warning. Default is 85%.
.TP
.B \-\-disk-critical
What percentage of occupied hard drive is to be considered as warning. Default is 95%.
.TP
.B \-n/\-\-number number of measures
How often should the measurements be done.
.TP
.B \-\-delay delay between measures
What should the dealy between measurements be.
.TP
.B \-\-services
Monitors Windows services. Queries all services which are set to start automatically and are not currently running.
.TP
.B \-x/\-\-exclude service1;service2;...
Exclude some services which usually start automatically, but which are safe to ignore (i.e. Performance and Logs)
.TP
.B \-h/\-\-help
Prints a small program help
.TP
.B \-v/\-\-verbose
Be more verbose in the output
.TP
.B \-V/\-\-version
Print the version of this script.
.TP
.B settings_file.conf
Passes a settings file which contains defaults. All options in the settings file can be overridden by CLI parameters.
.br
.SH SEE ALSO
.BR nagios3
.br
.SH AUTHOR
nagios\-wmi\-plugin was written by Alexander Sparber and Michele Baldessari
.PP
This manual page was written by Michele Baldessari <michele@pupazzo.org>,
for the Debian project (but may be used by others).
